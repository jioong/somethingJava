# BAT #
  
## 基础语法 ##
  
1. 批处理文件是一个 `.bat` 文件，文件的每一行都是一条 `DOS` 命令。可以使用任何文本编辑工具创建和修改。  
2. 批处理可以有逻辑结构，使用 `if, goto` 控制程序流，使用 `for` 实现循环。  
3. 可以将批处理文件所在路径放入 `PATH` 路径，则可在任意位置运行。  
4. `C:\AUTOEXEC.BAT` 是每次系统启动时自动运行。  
5. 大小写不敏感。  
  
## 参数 ##
  
### 系统参数 ###
  
* %SystemRoot% --- `C:\WINDOWS`  
* ...  

```Bat
	:: 枚举当前环境变量
	setlocal enabledelayedexpansion
       FOR /F "usebackq delims==" %%i IN (`set`) DO @echo %%i    !%%i!
```  
  
### 传递参数给批处理文件 ###
  
`%[1-9]` 表示参数，参数是指在运行批处理文件时在文件名后的字符串。变量从 `%0` 到 `%9`，其中 `%0` 表示批处理命令本身，其他参数字符串用 `%1 -- %9` 表示。  
  
## 批处理基本命令 ##
  
### 1. help ###
  
作用：显示命令的帮组信息。用法：  
` command /?` 或者 `help command`  
  
### 2. echo ###
  
用法：`echo [on|off] [message]`  
`echo [on|off]`   --- 打开回显或关闭回显。  
`echo`   --- 显示当前回显设置。  
`echo message`   --- 显示信息。  
`echo off`   --- 表示此语句后的所有运行的命令都不显示命令行本身。即不会有提示出现。  
  
### 3. @ ###
  
作用：不显示 `@` 后面的命令。  
它与 `echo off` 类似，但是它加在每个命令行的最前面，表示运行时不显示这一行的命令行，**只影响当前行。**  
  
### 4. goto ###
  
语法：`goto label`,其中 `label` 是参数，指定所要转向的批处理程序中的行。  
跳转到指定标签行，找到标签行后，程序将从下一行开始处理命令。  
`label` 标签的名字可以随便取，字母前必须加上冒号 `:` 来表示该字母是标签。  
`goto` 命令根据该冒号来寻找下一步跳转到那里。常与 `if` 配合适应。    
  
### 5. rem ###
  
语法：`rem message...` ,可以使用 `::` 代替 `rem` 。  
作用：注释。  
  
### 6. pause ###
  
作用：暂停批处理的执行，并在屏幕上显示 `press any key to cintinue...` 的提示，等待用户按下任意键后继续。  
可用于保留批处理的执行窗口。  
  
### 7. call ###
  
语法：`call [[Driver:][Path] FileName [BatchParameters]] [:label [arguments]]`  
参数：`[Driver:][Path] FileName` 指定要调用的批处理程序的位置和名称，其中 `FileName` 参数是必须以 `.bat, .cmd` 扩展名。  
调用另外的批处理程序，且不会终止父批处理程序。如果不使用 `call` 而直接调用别的批处理文件，那么执行完哪个批处理文件后将无法返回当前文件并执行当前文件的后续命令。  
`call` 命令可以调用作为调用目标的 **标签**。如果在脚本会批处理文件外使用 `call`，它将不会在命令行起作用。  
  
### 8. start ###
  
作用：调用外部程序，所有的`DOS`命令和命令行程序都可以由 `start` 命令来调用。  
常用参数：  
* `MIN` --- 开始时窗口最小化。  
* `SEPARATE` --- 在分开的空间内开始 16 位 *Windows* 程序。  
* `HIGH` --- 在 *HIGH* 优先级类别开始应用程序。  
* `REALTIME` --- 在 *REALTIME* 优先级类别开始应用程序。  
* `WAIT` --- 启动应用程序并等待它结束。  
* `parameters` --- 传递到命令的参数。  

### 9. if ###
  
`if` 表示将判断是否符合规定的条件，从而决定执行不同的命令。有三种格式：  
1. `if`  
语法：`if [not] "参数“ == "字符串" 待执行的命令`  
参数如果等于(not 表示不等于)指定的字符串，则条件成立，运行命令。否则， 执行下一句。  
  
2. `if exist`  
语法：`if [not] exist [路径\]文件名  待执行的命令`  
如果有指定的文件，则条件成立。  
  
3. `if errorlevel number`  
语法：`if [not] errorlevel <数字> 待执行的命令`  
如果程序返回值等于指定的数字，则条件成立。**返回值必须按照从大到小顺序排列。**  
这里的`errorlevel` 是在程序运行结束后返回的一个数值，用来表示程序运行的结果，称为错误码或返回码。  
  
4. `else`  
语法：`if 条件 (成立时执行的命令) else (不成立时执行的命令)`  
如果是多个条件，可使用括号把各条件包起来。  
**如果 else 的语句需要换行， if执行的行尾需要用 "^" 连接，并且 if 执行的动作需要用圆括号括起来。**  
```Bat
	if 1 == 0 (echo comment1) ^
	else (echo comment2)
```
  
5. 比较运算符  
	* `EQU` --- 等于 ==  
	* `NEQ` --- 不等于，没有 !=  
	* `LSS` --- 小于  
	* `LEQ` --- 小于或等于  
	* `GTR` --- 大于  
	* `GEQ` --- 大于或等于  

### 10. choice ###
  
作用：`choice` 可以让用户输入一个字符，用于选择，从而根据用户的选择返回不同的 `errorlevel`。该命令为*DOS* 系统提供的外部命令。  
`choice` 可以让用户输入 **一个字符**，从而运行不同的命令。  
  
### 11. for ###
  
`for` 主要用于参数在指定的范围内循环执行命令。


**参考资料：**[Bat学习](http://www.cnblogs.com/SunShineYPH/archive/2011/12/13/2285570.html)