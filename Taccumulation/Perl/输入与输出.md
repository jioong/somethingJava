# 输入与输出 #

## 读取标准输入 ##

读取标准输入流相当容易，使用 <STDIN\>操作符。  
如果读取到文件结尾(end-of-file)，整行输入操作符就会返回undef。

## 从钻石操作符输入 ##

**钻石操作符 <>**，它能让程序在处理条用参数时，提供类似于标准 Unix 工具程序的用法。  

程序的调用参数(invocation argument)通常是命令行上跟着程序名称后面的几个“单词”。  

钻石操作符只有遇到所有输入的结尾时，才会返回 undef。  

假如钻石操作符无法打开某个文件并将之读入，便会显示诊断信息。钻石操作符会自动跳到下一个文件。

## 调用参数 ##

钻石操作符其实不会真的去检查**调用参数**，它靠的是**@ARGV**数组。  
这个数组是由Perl解释器事先建立的特殊数组，其内容就是调用参数所组成的列表。@ARGV里塞满了调用参数列表。  

@ARGV的用法和其他的数组相同。  

> 钻石操作符如何决定使用那些文件名？  

> 方法：它会查找 @ARGV，如果找到的是空列表，就会改用标准输入流；否则，就会使用 @ARGV里的文件列表。  

这表示**程序开始后，只要尚未使用钻石操作符，就可以对@ARGV动点手脚。**


## 输出至标准输出 ##

print操作符会读取一个列表的所有值，并把每个项目依次送到标准输出。它在项目之前、之后都不会再加上额外的字符。

## 用printf 格式化输出结果 ##

printf操作符提供的参数包括“格式字符串”及“所要输出的数据列表”。  
“格式字符串”是填空用的模版，代表你想要的输出格式。而后面的列表里项目的个数应该要和转换的数目一样多。如果数目不对，就无法正确运作。

**转义**  
1. %d  代表十进制的整数。舍去小数点之后的数字。  
2. %x  代表十六进制。  
3. %o  代表八进制。  
4. %s  代表字符串，可以设定字段宽度。  
5. %f  代表浮点数，依需要四舍五入。可以指定小数位位数。  
6. %%  代表输出真正的 %。 

## 数组与printf ##  


## 文件句柄(file handle) ##

文件句柄就是Perl程序里的某个名称，代表Perl进程(process)与外界直接的输入\输出联系(connection)。也就是说，它是“联系”的名称，不一定是文件的名称。  
文件句柄的命名如同Perl其他的标识符。  

**建议全部使用大写字母来命名文件句柄**

保留 6 个特殊文件句柄:  
1. STDIN  
2. STDOUT  
3. STDERR  
4. DATA  
5. ARGV  
6. ARGVOUT 

## 打开文件句柄 ##

使用 open 操作符，要求操作系统为你的程序和外界开启一道桥梁。  

1. open CONFIG, "dino"
2. open CONFIG, "<dino"
3. open BEDROCK, ">fred"
4. open LOG, ">>logfile"  


## 不良文件句柄 ##

Perl同其他的程序语言一样，**自己无法打开文件，只能要求操作系统帮它打开文件。**当然，操作系统可能会因为文件的权限不允许或是错误的文件名等因素，而拒绝这么做。  

如果尝试从不良文件句柄(没有完全打开的文件句柄)读取数据，将会立即读到**文件结尾**。  
“文件结尾”：在标量上下文中是 undef，在列表上下文中是空列表。  
如果试图将数据写进不良文件句柄，这些数据将会被无声无息的丢弃。  

open操作符会通过返回值告诉它执行的结果是否成功。 

## 关闭文件句柄 ##

close操作符
  
     close 文件句柄名

所谓“关闭文件句柄”，也就是告诉操作系统，对该数据流的处理已经完成。当重新打开某个文件句柄时，Perl会自动关闭原先的文件句柄。在程序结束时，Perl会自动关闭文件句柄。 

## 使用文件句柄 ##

当文件句柄以读取模式打开后，可以轻易的从它读取一行数据，就像从 STDIN 读取标准输入流一样。

    从Unix系统读取密码文件  
	open PASSWD， “/etc/passwd”
		or die "How did you get logged in? ($!)";
	while (<PASSWD>){
		chomp;
		...
	} 

以写入或是添加模式打开的文件句柄可以在print 会 printf 函数中使用。使用时，直接放在关键字之后、参数列表之前

    print LOG "Captain's log";  #输出到 LOG

文件句柄和列表内容之间没有逗号。

## 改变默认的输出文件句柄 ##

原则上，当不为 print 提供输出句柄时，默认输出到 STDOUT。不过，可以使用 select 操作符来改变默认的文件句柄。  

    输出文件到 BEDROCK 句柄

	select BEDROCK;
	print "Hello world!";

一旦选择(select)了默认输出用的文件句柄，程序将会一直以此方式运作。  
**当所指定的默认文件句柄使用完毕后，最好把它设置为原本的默认值。** 

## 重新打开标准文件句柄 ##

3个系统文件句柄 STDIN、STDOUT、STDERR重新打开失败时，Perl会热心的帮你找回原先的文件句柄。即，Perl 只有当你成功打开新的联系时，才会关闭原本的系统文件句柄。

## 用die来处理严重错误 ##

当Perl发生严重错误(fatal error)时，程序应该终止运行并显示错误信息以告知原因。

$! 是给人看的系统抱怨信息。

## 用warn送出警告信息 ##

warn函数的行为就和die函数一样，不同之处自爱与它不是程序所执行的最后一步，它不会停止程序的运行。